{% extends 'appstage/base.html' %}
{% load static %}

{% block title %}Offres en attente{% endblock %}

{% block main %}
<div class="container mt-4">

    <h3 class="text-center mb-4 fw-bold text-danger">
        Offres en attente ({{ offres|length }})
    </h3>

    {% if offres|length == 0 %}
        <h5 class="text-center text-muted">Aucune offre en attente.</h5>
    {% else %}
        <div class="row g-4">

            {% for offre in offres %}
            <div class="col-md-4">
                <div class="card shadow-sm offer-card h-100">

                    {% if offre.imageOffre %}
                        <img src="{{ offre.imageOffre.url }}" class="card-img-top" alt="">
                    {% else %}
                        <img src="{% static 'appstage/img/default_offer.jpg' %}" class="card-img-top" alt="">
                    {% endif %}

                    <div class="card-body">
                        <h5 class="card-title fw-bold">{{ offre.titreOffre }}</h5>
                        <p class="text-muted">
                            <i class="bi bi-building"></i> {{ offre.entrepriseOffre }}
                        </p>

                        <p class="small text-secondary">
                            Déposée le {{ offre.dateDepotOffre|date:"d M Y" }}
                        </p>

                        <span class="badge bg-warning text-dark">En attente</span>

                        <hr>

                        <div class="d-flex justify-content-between">
                            <a href="/offres/{{ offre.IDOffre }}/" class="btn btn-primary btn-sm">Détails</a>
                            <a href="/offres/{{ offre.IDOffre }}/valider/" class="btn btn-success btn-sm">Valider</a>
                            <a href="/offres/{{ offre.IDOffre }}/refuser/" class="btn btn-danger btn-sm">Refuser</a>
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}

        </div>
    {% endif %}

</div>
{% endblock %}
