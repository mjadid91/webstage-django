{% extends 'appstage/base.html' %}
{% load static %}

{% block title %}Nouveau mot de passe{% endblock %}

{% block main %}
<div class="container py-5" style="max-width: 500px;">

    <!-- Titre -->
    <div class="text-center mb-5 animate-fade">
        <h2 class="fw-bold text-dark">Changer votre mot de passe</h2>
        <p class="text-muted">Saisissez votre nouveau mot de passe ci-dessous.</p>
    </div>

    {% if validlink %}

        <!-- Carte -->
        <div class="card shadow-lg border-0 rounded-4 p-4 p-lg-5 animate-fade">

            <form method="post" class="django-form-custom">
                {% csrf_token %}

                <!-- Erreurs -->
                {% if form.errors %}
                    <div class="alert alert-danger mb-4">
                        {{ form.errors }}
                    </div>
                {% endif %}

                <!-- Nouveau mot de passe -->
                <div class="mb-4">
                    {{ form.new_password1.label_tag }}
                    {{ form.new_password1 }}
                </div>

                <!-- Confirmation -->
                <div class="mb-4">
                    {{ form.new_password2.label_tag }}
                    {{ form.new_password2 }}
                </div>

                <!-- Bouton -->
                <button type="submit" class="btn btn-primary btn-lg w-100 fw-bold shadow-sm">
                    Confirmer le changement
                </button>

            </form>

        </div>

    {% else %}

        <!-- Lien invalide -->
        <div class="card shadow-lg border-0 rounded-4 p-5 text-center animate-fade">
            <i class="bi bi-x-circle-fill text-danger" style="font-size: 3rem;"></i>
            <h4 class="fw-bold mt-3">Lien invalide</h4>
            <p class="text-muted">Ce lien n'est plus valide. Veuillez recommencer la procédure.</p>
            <a href="/password-reset/" class="btn btn-primary fw-bold px-4 mt-3">
                Réessayer
            </a>
        </div>

    {% endif %}

</div>
{% endblock %}
